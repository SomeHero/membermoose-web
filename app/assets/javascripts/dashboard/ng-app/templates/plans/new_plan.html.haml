.action-form{"data-remodal-id"=>"new-plan-modal", "data-remodal-options"=>"hashTracking: false" }
  %section{"ng-class"=>"isActiveSection(1)"}
    %form{"name"=>"planNameForm", "novalidate"=>""}
      %header
        %h1
          Tell us about your plan.
      .group
        %label{:for => "plan[name]"}
          Plan Name
        %input#plan_name{:autofocus => "", :name => "plan[name]", :placeholder => "Plan Name", :required => "", :type => "text", "ng-model"=>"plan.name"}/
        %span{"ng-show" => "form_submitted && planNameForm['plan[name]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "planNameForm['plan[name]'].$error.required"}
            Plan name is required.
      .group
        %label{:for => "plan[description]"}
          Plan Description
        %textarea#plan_description{:rows => 5, :name => "plan[description]", :placeholder => "Description of plan", :required => "", "ng-model"=>"plan.description"}
        %span{"ng-show" => "form_submitted && planNameForm['plan[description]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "planNameForm['plan[description]'].$error.required"}
            Plan description is required.
      %footer
        %button.continue{:type=>"submit", "ng-click"=>"nextSection(planNameForm)"}
          Next
          %i.fa-arrow-right
      %div{"loading-screen" => "loading.show_spinner"}
  %section{"ng-class"=>"isActiveSection(2)"}
    %form{"name"=>"planFeatureForm", "novalidate"=>""}
      %header
        %h1
          What are the features of your new plan?
      .group
        %label{:for => "plan[features]"}
          Features
        %input#plan_features{:autofocus => "", :name => "plan[feature_1]", :placeholder => "Feature 1", :required => "", :type => "text", "ng-model"=>"plan.feature_1"}/
        %input#plan_features{:autofocus => "", :name => "plan[feature_2]", :placeholder => "Feature 2", :type => "text", "ng-model"=>"plan.feature_2"}/
        %input#plan_features{:autofocus => "", :name => "plan[feature_3]", :placeholder => "Feature 3", :type => "text", "ng-model"=>"plan.feature_3"}/
        %input#plan_features{:autofocus => "", :name => "plan[feature_4]", :placeholder => "Feature 4", :type => "text", "ng-model"=>"plan.feature_4"}/
        %span{"ng-show" => "form_submitted && planFeatureForm['plan[feature_1]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "planFeatureForm['plan[feature_1]'].$error.required"}
            Please tell us one feature of your plan.
      %footer
        %button.previous{"ng-click"=>"goToPreviousSection()"}
          Back
        %button.continue{:type=>"submit", "ng-click"=>"nextSection(planNameForm)"}
          Next
          %i.fa-arrow-right
      %div{"loading-screen" => "loading.show_spinner"}
  %section{"ng-class"=>"isActiveSection(3)"}
    %form{"name"=>"planBillingForm", "novalidate"=>""}
      %header
        %h1
          How will you bill your customers?
      .group
        %label{:for => "billing_interval"}
          My customers are billed every
        %input#plan_amount{:autofocus => "", :name => "plan[amount]", :placeholder => "Amount", :required => "", :type => "text", "ng-model"=>"plan.amount",  "money"=>"", "precision"=>"2"}/
        %span{"ng-show" => "form_submitted && planBillingForm['plan[amount]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "planBillingForm['plan[amount]'].$error.required"}
            Amount is a required field.
        .input-wrapper
          %select#billing_cycle{:name => "plan[billing_cycle]", :placeholder => "Billing Cycle", :required => "", "ng-model"=>"plan.billing_cycle"}
            %option{"value"=>"", "selected"=>""}
              Billing Interval
            %option{"style"=>"text-align:center", "value"=>"day"}
              Daily
            %option{"value"=>"week"}
              Weekly
            %option{"value"=>"month"}
              Monthly
            %option{"value"=>"year"}
              Yearly
        %span{"ng-show" => "form_submitted && planBillingForm['plan[billing_cycle]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "planBillingForm['plan[billing_cycle]'].$error.required"}
            Billing cycle is required.
      %footer
        %button.previous{"ng-click"=>"goToPreviousSection()"}
          Back
        %button.continue{"ng-click"=>"nextSection(planBillingForm)"}
          Next
          %i.fa-arrow-right
      %div{"loading-screen" => "loading.show_spinner"}
  %section{"ng-class"=>"isActiveSection(4)"}
    %form{"name"=>"hasPlanTrialPeriod", "novalidate"=>""}
      %header
        %h1
          Do you offer new subscribers a free trial period?
      .group
        %label{:for => "free_trial_period"}
          Free Trial Period
        %input#free_trial_period{:autofocus => "", :name => "plan[free_trial_period_yes]", :required => "", :type => "radio", "ng-model"=>"plan.has_free_trial_period", "ng-value"=>"true"}
          Yes
        %input#free_trial_period{:autofocus => "", :name => "plan[free_trial_period_no]", :required => "", :type => "radio", "ng-model"=>"plan.has_free_trial_period", "ng-value"=>"false"}
          No
        %span{"ng-show" => "form_submitted && planTrialPeriod['plan[free_trial_period]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "planTrialPeriod['plan[free_trial_period]'].$error.required"}
            Free Trial Period is required.
      %footer
        %button.previous{"ng-click"=>"goToPreviousSection()"}
          Back
        %button.continue{"ng-click"=>"hasFreeTrialPeriodClicked(hasPlanTrialPeriod)"}
          Next
          %i.fa-arrow-right
      %div{"loading-screen" => "loading.show_spinner"}
  %section{"ng-class"=>"isActiveSection(5)"}
    %form{"name"=>"planTrialPeriod", "novalidate"=>""}
      %header
        %h1
          How many days is your plan's free trial period?
      .group
        %label{:for => "free_trial_period"}
          Free Trial Period
        %input#free_trial_period{:autofocus => "", :name => "plan[free_trial_period_days]", :placeholder => "Free Trial Period (# of days)", :required => "", :type => "text", "maxlength"=>"4", "ng-model"=>"plan.free_trial_period"}/
        %span{"ng-show" => "form_submitted && planTrialPeriod['plan[free_trial_period_days]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "planTrialPeriod['plan[free_trial_period_days]'].$error.required"}
            Free Trial Period is required.
      %footer
        %button.previous{"ng-click"=>"goToPreviousSection()"}
          Back
        %button.continue{"ng-click"=>"nextSection(planTrialPeriod)"}
          Next
          %i.fa-arrow-right
      %div{"loading-screen" => "loading.show_spinner"}
  %section{"ng-class"=>"isActiveSection(6)"}
    %form{"name"=>"discountedTrialPeriod", "novalidate"=>""}
      %header
        %h1
          Do you want to offer a discounted trial?
      .group
        %label{:for => "discounted_trial_yes"}
          Discounted Trial?
        %input#discounted_trial_yes{:autofocus => "", :name => "plan[discounted_trial_yes]", :required => "", :type => "radio", "ng-model"=>"plan.has_discounted_trial", "ng-value"=>"true"}
          Yes
        %input#discounted_trial_no{:autofocus => "", :name => "plan[discounted_trial_yes]", :required => "", :type => "radio", "ng-model"=>"plan.has_discounted_trial", "ng-value"=>"false"}
          No
        %span{"ng-show" => "form_submitted && discountedTrialPeriod['plan[discounted_trial_yes]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "discountedTrialPeriod['plan[discounted_trial_yes]'].$error.required"}
            Please tell us if you would like to offer a discounted trial.
      %footer
        %button.previous{"ng-click"=>"goToPreviousSection()"}
          Back
        %button.continue{"ng-click"=>"hasDiscountedTrialPeriodClicked(discountedTrialPeriod)"}
          Next
          %i.fa-arrow-right
      %div{"loading-screen" => "loading.show_spinner"}
  %section{"ng-class"=>"isActiveSection(7)"}
    %form{"name"=>"discountedTrialPeriodType", "novalidate"=>""}
      %header
        %h1
          Tell us about the type of discounted trial you would like to offer?
      .group
        %label{:for => "discounted_trial_type"}
          Would you like offer an amount or percentage discount off the subscription cost to new subscriber?
        %input#discounted_trial_yes{:autofocus => "", :name => "plan[discounted_trial_yes]", :required => "", :type => "radio", "ng-model"=>"plan.discounted_trial_type", "ng-value"=>"'amount'"}
          Amount
        %input#discounted_trial_no{:autofocus => "", :name => "plan[discounted_trial_yes]", :required => "", :type => "radio", "ng-model"=>"plan.discounted_trial_type", "ng-value"=>"'percentage'"}
          Percentage
        %span{"ng-show" => "form_submitted && discountedTrialPeriodType['plan[discounted_trial]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "discountedTrialPeriodType['plan[discounted_trial]'].$error.required"}
            Please tell us whether you would like to discount using a fixed amount off or a percentage.
      .group{"ng-show"=>"plan.discounted_trial_type == 'percentage'"}
        %label{:for => "percentage_off_amount"}
          Percentage Off Amount
        %input#planTrialPeriodAmount{:autofocus => "", :name => "plan[discounted_trial_percentage]", :placeholder => "Percentage Off (1% - 100%)", "ng-required"=>"plan.discounted_trial_type == 'percentage'", :type => "text", "maxlength"=>"3", "ng-model"=>"plan.discounted_trail_percentage", "ng-checked"=>"false"}/
        %span{"ng-show" => "form_submitted && planTrialPeriod['plan[discounted_trial_percentage]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "planTrialPeriod['plan[discounted_trial_percentage]'].$error.required"}
            Please tell us the percentage discount for your trial.
      .group{"ng-show"=>"plan.discounted_trial_type == 'amount'"}
        %label{:for => "percentage_off_amount"}
          $ Amount Off
        %input#planTrialPeriodPercentage{:autofocus => "", :name => "plan[discounted_trial_amount]", :placeholder => "Amount Off ($1.00 - {{plan.amount | currency}})", "ng-required"=>"plan.discounted_trial_type == 'amount'", :type => "text", "maxlength"=>"8", "ng-model"=>"plan.discounted_trail_amount", "ng-checked"=>"false",  "money"=>"", "precision"=>"2"}/
        %span{"ng-show" => "form_submitted && planTrialPeriod['plan[discounted_trial_amount]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "planTrialPeriod['plan[discounted_trial_amount]'].$error.required"}
            Please tell us the amount discount for your trial.
      %footer
        %button.previous{"ng-click"=>"goToPreviousSection()"}
          Back
        %button.continue{"ng-click"=>"nextSection(discountedTrialPeriodType)"}
          Next
          %i.fa-arrow-right
      %div{"loading-screen" => "loading.show_spinner"}
  %section{"ng-class"=>"isActiveSection(8)"}
    %form{"name"=>"planTermsForm", "novalidate"=>""}
      %header
        %h1
          Are there any Terms and Conditions for your plan?
      .group
        %label{:for => "terms_and_conditions"}
          Terms and Conditions
        %textarea#terms_and_conditions{:autofocus => "", :rows => 5, :name => "plan[terms_and_conditions]", :placeholder => "Terms and Conditions", "ng-modal"=>"plan.terms_and_conditions"}
      %footer
        %button.previous{"ng-click"=>"goToPreviousSection()"}
          Back
        %button.continue{"ng-click"=>"createPlan(planTermsForm)"}
          Create Plan
          %i.fa-arrow-right
      %div{"loading-screen" => "loading.show_spinner"}
  %section{"ng-class"=>"isActiveSection(9)"}
    %header
      %h2
        Success
      %h4
        Congrats. Your first recurring subscription plan is setup.
    .group
      %img.trophy{:src => asset_path('trophy.jpg'), "ng-alt"=>"Your Gold Cup!"}
    %footer
      %button.done{"ng-click"=>"dismissModal()"}
        Done
        %i.fa-arrow-right
    %div{"loading-screen" => "loading.show_spinner"}
