%header.content-title
  %h4
    MEMBERS
  %h6
    All of the people who love what you do.
%table.table{"ng-table"=>"", "ng-hide"=>"members.length == 0"}
  %tr{"ng-repeat"=>"member in members"}
    %td.select-item
      %input{:type=>"checkbox", "ng-click"=>"selectMember($event, member)", "ng-checked"=>"selected_member == member"}
    %td{"data-title"=>"'First Name'"}
      {{member.firstName}}
    %td{"data-title"=>"'Last Name'"}
      {{member.lastName}}
    %td{"data-title"=>"'Email'"}
      {{member.user.email}}
    %td{"data-title"=>"'Member Since'"}
      December 12, 2012
    %td{"data-title"=>"'Plans'"}
      {{member.planNames}}
    %td{"data-title"=>"'Status'"}
      Active
%pagination{"total-items"=>"totalItems","ng-model"=>"currentPage","ng-change"=>"pageChanged()", "ng-show"=>"totalItems > 0 && !isLoading"}
.no-results{"ng-show"=>"members.length == 0 && !isLoading"}
  %img{:alt => "Cards we support (visa, mastercard, discover, amex)", :src => asset_path('dead-moose.png')}/
  %p
    You don't have any members yet!
.edit-bar.animate-show{"ng-show"=>"edit_panel_open"}
  .edit-controls
    %ul.list-inline.pull-right{:style=>"list-style-type: none;"}
      %li
        %a{:title=>"Plan Menu", "popover-placement"=>"bottom", "popover-template"=>"'dashboard/ng-app/templates/submenus/members.html'"}
          %i.fa.fa-cog{"ng-click"=>"openMenu()"}
      %li
        %a{:title=>"Close"}
          %i.fa.fa-times{"ng-click"=>"closeEditBar()" }
  .edit-form-wrapper{:style=>"padding: 0px 20px 60px 20px"}
    %h4
      Member Details
    %h6
      {{selected_member.firstName}} {{selected_member.lastName}} ({{selected_member.guid}})
    %form{"name"=>"memberForm","ng-submit"=>"updatePlan(plan)"}
      .form-group
        %label{:for=>"firstName"}
          First Name
        %input#firstName.form-control.input{:type=>"text",:name=>"selected_member[first_name]",:placeholder=>"First Name","ng-model"=>"selected_member.firstName"}
      .form-group
        %label{:for=>"lastName"}
          Last Name
        %input#lastName.form-control.input{:type=>"text",:name=>"selected_member[last_name]",:placeholder=>"Last Name","ng-model"=>"selected_member.lastName"}
      .form-group
        %label{:for=>"emailAddress"}
          Email Address
        %input#emailAddress.form-control.input{:type=>"text",:name=>"selected_member[user[email]]",:placeholder=>"Email Address","ng-model"=>"selected_member.user.email"}
      %button.btn.btn-primary{:type=>"submit",  "ng-click"=>"updateMember(selected_member, memberForm)"}
        Update Member
    %div{:style=>"margin-top: 10px;"}
      %p.label
        Plans
      %p.data
        {{selected_member.planNames}}
      %p.label
        Billing History:
      %p.data
        %table.table
          %tr{"ng-repeat"=>"payment in selected_member.billingHistory"}
            %td
              {{payment.createdAt | date :'shortDate'}}
            %td
              {{payment.amount | currency}}
            %td
              {{payment.status}}
      %p.label
        Next Billing Date:
      %p.data
        September 14, 2015
