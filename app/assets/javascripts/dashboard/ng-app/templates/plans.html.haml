%header.content-title
  %h4
    PLANS
  %h6
    Your recurring subsciption plans your members subscribe to.
%div{:style=>"margin: 40px 0px;"}
  .container-fluid
    .row{:style=>"margin-bottom: 20px;"}
      .col-md-3
        .plan{"ng-click"=>"createPlan()", :style=>"position: relative;"}
          .plan-image
            .overlay
              .view-project{:style=>"height: 100px; line-height: 100px; margin-top: 10px;"}
                %a{"ng-href"=>"/plans/{{plan.id}}"}
                  %i.fa.fa-plus{:style=>"font-size: 72px; line-height: 100px;"}
          .plan-info
            %h2.plan-name{:style=>"margin-top: 0px;"}
              Create Plan
      .col-md-3{"ng-repeat"=>"plan in plans_first_row"}
        .plan{"ng-click"=>"editPlan(plan)", "ng-class"=>"setSelectedPlan(plan)"}
          .plan-image{:style=>"height:70px;"}
            .overlay
              %div.view-project
                %a{"ng-href"=>"/plans/{{plan.id}}"}
          .plan-info
            %h2.plan-name
              {{plan.name}}
            %h3.plan-amount
              {{plan.amount | currency }}
    .row{"ng-repeat"=>"row in rows", :style=>"margin-bottom: 20px;"}
      .col-md-3{"ng-repeat"=>"plan in row"}
        .plan{"ng-click"=>"editPlan(plan)", "ng-class"=>"setSelectedPlan(plan)"}
          .plan-image{:style=>"height:70px;"}
            .overlay
              %div.view-project
                %a{"ng-href"=>"/plans/{{plan.id}}"}
          .plan-info
            %h2.plan-name
              {{plan.name}}
            %h3.plan-amount
              {{plan.amount | currency }}
.edit-bar{"ng-show"=>"showEditBar()"}
  .edit-controls
    %ul.list-inline.pull-right{:style=>"list-style-type: none;"}
      %li
        %a{:title=>"Plan Menu", "popover-placement"=>"bottom", "popover-template"=>"'dashboard/ng-app/templates/submenus/plans.html'"}
          %i.fa.fa-cog
      %li
        %a{:title=>"Close"}
          %i.fa.fa-times{"ng-click"=>"closeEditBar()" }
  .edit-form-wrapper{:style=>"padding: 0px 20px 60px 20px"}
    %form{"name"=>"plansForm","ng-submit"=>"updatePlan(plan)", "novalidate"=>""}
      .form-group
        %label{:for=>"planName"}
          Plan Name
        %input#planName.form-control.input{:type=>"text",:name=>"plan[name]",:placeholder=>"Plan Name","ng-model"=>"plan.name", "ng-model-options"=>"{updateOn: 'submit'}", "required"=>""}
        %span{"ng-show" => "plansForm['plan[name]'].$dirty && plansForm['plan[name]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "plansForm['plan[name]'].$error.required"}
            Plan name is required.
      .form-group
        %label{:for=>"planDescription"}
          Plan Description
        %textarea#planDescription.form-control.input{:rows=>"5",:name=>"plan[description]",:placeholder=>"Description","ng-model"=>"plan.description", "ng-model-options"=>"{updateOn: 'submit'}", "required"=>""}
        %span{"ng-show" => "plansForm['plan[description]'].$dirty && plansForm['plan[description]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "plansForm['plan[description]'].$error.required"}
            Plan description is required.
      .form-group
        %label{:for=>"planAmount"}
          Amount
        %input#planAmount.form-control.input{:type=>"text",:name=>"plan[amount]",:placeholder=>"Amount","ng-model"=>"plan.amount", "ng-model-options"=>"{updateOn: 'submit'}", "required"=>""}
        %span{"ng-show" => "plansForm['plan[amount]'].$dirty && plansForm['plan[amount]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "plansForm['plan[amount]'].$error.required"}
            Amount is required.  If this is a free plan, you must enter $0.
      .form-group
        %label{:for=>"planBillingCycle"}
          Billing Cycle
        %input#planBillingCycle.form-control.input{:type=>"text",:name=>"plan[billing_cycle]",:placeholder=>"Billing Cycle","ng-model"=>"plan.billingCycle", "ng-model-options"=>"{updateOn: 'submit'}", "required"=>""}
        %span{"ng-show" => "plansForm['plan[billing_cycle]'].$dirty && plansForm['plan[billing_cycle]'].$invalid", :style => "color:red"}
          %span{"ng-show" => "plansForm['plan[billing_cycle]'].$error.required"}
            Billing Cycle is required.
      .form-group
        %label{:for=>"planBillingCycle"}
          Free Trial Period
        %input#planBillingCycle.form-control.input{:type=>"text",:name=>"plan[trial_period_days]",:placeholder=>"Free Trial Period","ng-model"=>"plan.trialPeriodDays", "ng-model-options"=>"{updateOn: 'submit'}"}
      .form-group
        %label{:for=>"planTermsAndConditions"}
          Terms and Conditions
        %textarea#planTermsAndConditions.form-control{:rows=>"8", :name=>"plan[terms_and_conditions]",:placeholder=>"Terms and Conditions","ng-model"=>"plan.termsAndConditions", "ng-model-options"=>"{updateOn: 'submit'}"}
      .form-group
        %label{:for=>"public"}
          Show on Web Page
        %div
          %switch#public.green{"name"=>"public", "ng-model"=>"plan.public", "ng-model-options"=>"{updateOn: 'submit'}"}}
      %button.btn.btn-primary{:type=>"submit"}
        Submit
